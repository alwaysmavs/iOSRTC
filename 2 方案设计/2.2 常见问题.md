## 2.2 常见问题

### 1 PLMediaStreamingKit 和 PLCameraStreamingKit 有什么不同？

两者在采集、美颜和推流等功能上都是使用的相同的模块，接口也基本是一致的，只是 PLMediaStreamingKit 多了连麦功能。

### 2 libPLMediaStreamingKit.a 和 libPLMediaStreamingKit(RTC).a 有什么不同？

前者是推流 SDK 的静态库，后者是连麦 SDK 的静态库，因为后者体积比较大，所以单独出来，不需要连麦功能的客户不需要引入。

### 3 连麦窗口是否可以移动 ？ 

连麦的渲染 View 由 SDK 回调给 App 开发者的，开发者可以随意改变位置和拖动，但是观众端从 CDN 观看的画面是由主播合流后的画面，不能移动。

### 4 观众端的看播和连麦是否可以无缝切换 ？ 

由于观众看播是从 CDN 拉流，而连麦是从 WebRTC 服务器拉流，因此会有短暂切换等待。

### 5 连麦 SDK 是否提供了播放器功能 ？

没有，连麦 SDK 不提供播放器功能，观众播放 CDN 下行的流依然可以通过七牛的播放器 SDK 完成。

### 6 推流是否也必须加入 "连麦房间" ？ 

推流依然沿用以前的流程，不用加入 “连麦房间”，调用连麦接口的时候，会在 SDK 内部 “自动” 加入房间。

### 7 如何优化带宽占用

连麦互动相比于原有的单向推流＋播放，增加了更多的带宽占用，因此需要合理的分配推流&连麦的参数，以达到最好的效果。

- 对于主播而言，同时需要 “推流”＋“连麦”，因此，主播端的带宽占用由三部分决定，“推流的码率” ＋ “连麦上行码率” ＋ “连麦下行的码率”

- 推流的视频码率可以在 PLVideoStreamingConfiguration 中配置，具体参考：[视频编码参数](https://github.com/pili-engineering/PLMediaStreamingKit/wiki/PLStreamingKit#511-%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81%E5%8F%82%E6%95%B0)

- 连麦的码率设置可以查看 rtcMinVideoBitrate 和 rtcMaxVideoBitrate 属性说明；

### 8 如何优化功耗

对于主播而言，同时需要 “推流”＋“连麦”，因此对手机的性能提出了更高的要求，我们也可以通过合理的参数配置，来适当减轻主播端的功耗压力。

- 合理配置连麦者的画面尺寸

  由于连麦对象的画面是小窗口，因此，对于连麦者，可以考虑使用比主播小一些的画面尺寸，这样可以显著降低主播端对连麦画面的剪裁压力，该画面尺寸可以在 PLRTCConfiguration 中设置；


- 合理配置主播端的合流参数

  主播端配置连麦合流画面的尺寸尽量接近连麦者的画面尺寸，比如：如果连麦者输出的画面尺寸是 320 x 240 ，那么主播端配置该对象合流的尺寸就用 320 x 240 或者小于该尺寸的值，这样可以避免或者减少主播端对连麦画面进行拉伸。合流画面的尺寸可以在 rtcMixOverlayRectArray 中设置；

- 适当降低连麦帧率

  连麦对讲的时候，画面很少剧烈运动，一般 15～20 帧的帧率足够了，降低帧率，可以显著降低 CPU 的处理压力，从而优化功耗。视频采集的帧率可以在 PLVideoCaptureConfiguration 中设置。
 
### 9 如何进行纯音频连麦？

PLRTCConfiguration 配置 PLRTCConferenceType 为 PLRTCConferenceTypeAudio 即可。
